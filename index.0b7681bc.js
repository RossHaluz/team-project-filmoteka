var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},t={},n={},r=e.parcelRequired7c6;null==r&&((r=function(e){if(e in t)return t[e].exports;if(e in n){var r=n[e];delete n[e];var i={id:e,exports:{}};return t[e]=i,r.call(i.exports,i,i.exports),i.exports}var a=new Error("Cannot find module '"+e+"'");throw a.code="MODULE_NOT_FOUND",a}).register=function(e,t){n[e]=t},e.parcelRequired7c6=r),r("lhLDm");var i=r("96LRb"),a=r("lhLDm"),o=r("2QMTS");const l=new(0,a.default),s={mediaType:"movie",lang:"en-US",page:l.page,include_adult:!1};i.refs.form.addEventListener("submit",(function(e){if(e.preventDefault(),l.actualQuery=e.currentTarget.elements.filmname.value,!l.actualQuery)return i.refs.formNotification.textContent="The text field is empty. Please type something into it and retry.",void setTimeout((()=>i.refs.formNotification.textContent=""),3e3);l.fetchWithSearchFilmData(s).then((e=>{if(!e.data.results.length)return i.refs.formNotification.textContent="Search result not successful. Enter the correct movie name and",void setTimeout((()=>i.refs.formNotification.textContent=""),3e3);(0,o.creatCards)(e.data.results)}))}));o=r("2QMTS");(i=r("96LRb")).refs.changeColor.addEventListener("click",(function(){document.body.classList.toggle("dark")})),r("8DW4i");a=r("lhLDm"),i=r("96LRb");var c=r("8DW4i");const d=new(0,a.default);async function u(e){e.target!==i.refs.modalCloseBtn&&e.target!==i.refs.backdrop&&27!==e.keyCode||(document.body.classList.remove("no-scroll"),i.refs.backdrop.classList.add("is-hidden")),i.refs.backdrop.removeEventListener("click",u),window.removeEventListener("keydown",u)}i.refs.gallery.addEventListener("click",(async function(e){if(!e.target.classList.contains("card-image"))return;i.refs.backdrop.classList.remove("is-hidden"),document.body.classList.add("no-scroll"),i.refs.modalContent.innerHTML="";const t=e.target.dataset.id;d.getCurrentFilm({id:t}).then((e=>(0,c.createMarkup)(e.data))).catch((e=>console.log(e))),i.refs.backdrop.addEventListener("click",u),window.addEventListener("keydown",u)})),i.refs.modalCloseBtn.addEventListener("click",u),r("l3Yx2");i=r("96LRb");const f=new(0,(a=r("lhLDm")).default);let m=0,p=[],g=[];const y=document.querySelector(".modal__trailer-btn"),L=document.querySelector(".closebtn"),h=document.querySelector("#overlay-video"),v=document.querySelector("#overlay-content");i.refs.gallery.addEventListener("click",(function(e){m=Number(e.target.dataset.id)})),i.refs.backdrop.addEventListener("click",(function(e){"▶"===e.target.innerText&&(g=[],f.fetchTrailer(m).then((e=>{p=e.data.results,p.length?(console.log(p),h.style.width="100%",p.forEach((e=>{let{key:t,site:n,name:r,type:i}=e;"YouTube"===n&&"Trailer"===i&&g.push(`\n                    <iframe src="https://www.youtube.com/embed/${t}" \n                    title="${r}" frameborder="0" allow="accelerometer; autoplay; \n                    clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>\n                    `)})),v.innerHTML=g.join("")):(y.style.display="none",alert("No found trailers"))})))})),L.addEventListener("click",(function(){h.style.width="0%"})),window.addEventListener("keydown",(function(e){"Escape"===e.code&&(e.preventDefault(),h.style.width="0%")}));document.querySelector(".overlay__backdrop").addEventListener("click",(function(e){e.currentTarget===e.target&&(e.preventDefault(),h.style.width="0%")}));a=r("lhLDm"),i=r("96LRb");const w=new(0,a.default);let b=1;const k={mediaType:"movie",timeWindow:"week"};function T(e){const t=e.map((({poster_path:e,title:t,release_date:n,id:r})=>{return`\n  <li class="galery-list__item card-set-iteam">\n          <img data-id=${r} src="https://image.tmdb.org/t/p/w500/${e}" alt="${t}" class="galery-list__img" />\n          <h3 class="galery-list__title">${t}</h3>\n          <p class="galery-list__desc">\n            Science Fiction, Action, Adventure, Drama | ${i=n,i.split("").slice(0,4).join("")}\n          </p>\n        </li>\n  `;var i})).join("");i.refs.gallery.innerHTML=t}i.refs.paginationListItemPrev.addEventListener("click",(function(){if(1===b)return;i.refs.gallery.innerHTML="",b-=1,w.actualPage=b,i.refs.paginationListItemPage.innerHTML=b,w.fetchWithAllFilmsData(k).then((e=>T(e.data.results)))})),i.refs.paginationListItemNext.addEventListener("click",(function(){i.refs.gallery.innerHTML="",b+=1,w.actualPage=b,i.refs.paginationListItemPage.innerHTML=b,w.fetchWithAllFilmsData(k).then((e=>T(e.data.results)))})),document.addEventListener("DOMContentLoaded",(()=>{let e=document.querySelector(".btn-goup");console.log("btn on"),window.onscroll=function(){window.pageYOffset>580?e.classList.remove("is-hidden"):e.classList.add("is-hidden")},e.addEventListener("click",(function(){console.log("это я"),window.scrollBy({top:-window.pageYOffset,behavior:"smooth"})}))})),(0,o.onCreat)();
//# sourceMappingURL=index.0b7681bc.js.map
