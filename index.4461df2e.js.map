{"mappings":"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","sources":["src/js/main.js","src/js/main/searchMovies.js","src/js/main/changeColor.js","src/js/modal/modals.js","src/js/main/trailersGallery.js","src/js/paginatin/pagination.js","src/js/main/buttonScrolUp.js"],"sourcesContent":["import FetchFilmsApi from './fetch-service/fechFilmsApi';\nimport { onKeywordSearch } from './main/searchMovies';\nimport { onCreat, creatCards } from './main/renderMainMarkup';\nimport { onButtonScrolUp } from './main/buttonScrolUp';\nimport { onClickChangeColor } from './main/changeColor';\nimport { createMarkup } from './fetch-service/renderFuncApi';\nimport { openModal } from './modal/modals';\nimport { openTeamModal } from './modal/close-modal';\nonButtonScrolUp();\nonCreat();\n// addListenerToCard();\nimport { onSearchTrailer, getTrailerId, openTrailersGallary, showTrailersGallary, closeTrailersGallary } from \"./main/trailersGallery\";\nimport { onClickBtnNext } from './paginatin/pagination';\n\n\n\n\n\n\n","import { refs } from '../fetch-service/refs';\nimport FetchFilmsApi from '../fetch-service/fechFilmsApi';\nimport { creatCards } from './renderMainMarkup';\n\nconst filmsAPIService = new FetchFilmsApi();\nconst parameters = {\n  mediaType: 'movie',\n  lang: 'en-US',\n  page: filmsAPIService.page,\n  include_adult: false,\n};\n\nrefs.form.addEventListener('submit', onKeywordSearch);\n\n\n// Функція реалізує пошук та відображення фільмів за ключовим словом. Якщо пустий інпут або такого фільму немає - з'являється сповіщення. \nexport function onKeywordSearch(event) {\n  event.preventDefault();   \n\n  filmsAPIService.actualQuery = event.currentTarget.elements.filmname.value;\n\n  if (!filmsAPIService.actualQuery) {\n    refs.formNotification.textContent = \"The text field is empty. Please type something into it and retry.\",\n      setTimeout(() => refs.formNotification.textContent = \"\", 3000)\n    return;\n  }\n\n  filmsAPIService.fetchWithSearchFilmData(parameters).then(resp => {\n    if (!resp.data.results.length) {\n    refs.formNotification.textContent = \"Search result not successful. Enter the correct movie name and\";\n      setTimeout(() => refs.formNotification.textContent = \"\", 3000)\n      return;\n    }\n    creatCards(resp.data.results);\n  });\n}\n\n","import { refs } from \"../fetch-service/refs\";\n\n\nrefs.changeColor.addEventListener('click', onClickChangeColor);\n\nexport function onClickChangeColor() {\n    const edit = document.body;\n    edit.classList.toggle('dark');\n}\n","// const modal = document.querySelector('.modal');\n\n// modal.addEventListener('click', closeModal);\n\n// function closeModal(event) {\n//     const modalCloseBtn = document.querySelector('.modal__icon-close');\n//     const target = event.target;\n//     console.log(target); // при нажатии на сам крестик (другой таргет) модалка не\n\n//     if (target === modalCloseBtn) {\n//         setTimeout(() => {\n//             modal.style.visibility = 'hidden';\n//         }, 300);\n//         modal.style.opacity = 0;\n//     }\n// }\n\n// FT-20 Реалізувати закриття модалки за натисканням на клавішу ESC і за кліком поза межами модалки, не забути зняти слухачів\n\n// закинуть в function openModal\nwindow.addEventListener('keydown', onEscClick);\n\n// ________________\n\nfunction onEscClick(evt) {\n  if (evt.code === 'Escape') {\n    closeModal();\n    modal.classList.remove('visiable');\n    modal.removeEventListener('click', closeModal);\n    window.removeEventListener('keydown', onEscClick);\n  }\n}\n\nimport FetchFilmsApi from '../fetch-service/fechFilmsApi';\nimport { refs } from '../fetch-service/refs';\nimport { createMarkup } from '../fetch-service/renderFuncApi';\n\n\nconst fetchFilmsApi = new FetchFilmsApi();\n\nrefs.gallery.addEventListener('click', openModal); //galleryCard.dataset.id\nrefs.modalCloseBtn.addEventListener('click', closeModal);\n\nasync function openModal(e) {\n  if (!e.target.classList.contains('card-image')) {\n    return;\n  }\n\n  refs.backdrop.classList.remove('is-hidden');\n  document.body.classList.add('no-scroll');\n  refs.modalContent.innerHTML = '';\n  const filmId = e.target.dataset.id;\n\n  fetchFilmsApi\n    .getCurrentFilm({ id: filmId })\n    .then(data => createMarkup(data.data))\n    .catch(error => console.log(error));\n  refs.backdrop.addEventListener('click', closeModal);\n  window.addEventListener('keydown', closeModal);\n}\n\nasync function closeModal(e) {\n  if (\n    e.target === refs.modalCloseBtn ||\n    e.target === refs.backdrop ||\n    e.keyCode === 27\n  ) {\n    document.body.classList.remove('no-scroll');\n    refs.backdrop.classList.add('is-hidden');\n  }\n  refs.backdrop.removeEventListener('click', closeModal);\n  window.removeEventListener('keydown', closeModal);\n}\n\nexport { openModal };\n\nwindow.addEventListener('keydown', onEscClickEsc);\n\nfunction onEscClickEsc(evt) {\n  if (evt.code === 'Escape') {\n    console.log('Escape');\n    document.body.classList.remove('no-scroll');\n    refs.backdrop.classList.add('is-hidden');\n  }\n}\n\nconst backdrop = document.querySelector('.footer__backdrop');\nbackdrop.addEventListener('click', onBackdropClick);\nconsole.log(backdrop);\n\nfunction onBackdropClick(evt) {\n  if (evt.currentTarget === evt.target) {\n    console.log('Backdrop');\n    document.body.classList.remove('no-scroll');\n    refs.backdrop.classList.add('is-hidden');\n  }\n}\n","import { refs } from '../fetch-service/refs';\nimport FetchFilmsApi from '../fetch-service/fechFilmsApi';\n\nconst api = new FetchFilmsApi(); //ініціалізація класу запитів\n\nlet currentId = 0; // поточний id фільму, який відкритий в модалці\nlet videosArr = []; // масив для всіх знайдених відео\nlet embedTrailer = []; // масив для трейлерів на ютубі, які додаються у відео-галерею\n\nconst trailerBtn = document.querySelector('.modal__trailer-btn'); //кнопка запуску трейлера\nconst closeBtn = document.querySelector('.closebtn'); //кнопка закриття відео-галереї\nconst overlayForVideo = document.querySelector('#overlay-video'); //модалка для відео-галереї\nconst overlayContent = document.querySelector('#overlay-content'); //наповнення відео-галереї\n\nrefs.gallery.addEventListener('click', getTrailerId); //слухач принатискання на картку фільма\nrefs.backdrop.addEventListener('click', openTrailersGallary); //слухач відкриття модалного вікна з карткою фільму\ncloseBtn.addEventListener('click', closeTrailersGallary); //слухач закриття відео-галереї\n\n// отримання id фільму\nfunction getTrailerId(e) {\n  currentId = Number(e.target.dataset.id);\n}\n\n// відкриття модалки з трейлерами при натисканні на кнопку ▶ \"Show Trailer\" \nfunction openTrailersGallary(e) {\n  if (e.target.innerText === '▶') {\n    showTrailersGallary();\n  }\n}\n\n// формування галереї трейлерів з ютуб\nfunction showTrailersGallary() {\n  embedTrailer = [];\n  // пошук трейлерів по id фільму\n  api.fetchTrailer(currentId).then(response => {\n    videosArr = response.data.results;\n\n    // якщо після запиту відео НЕ прийшли, то кнопка ▶ \"Show Trailer\" стає display:'none'\n    if (!videosArr.length) {\n      // trailerBtn.style.display = \"none\";  //видає помилку в консолі\n      // trailerBtn.style.opacity = 0;  //видає помилку в консолі\n      alert('No found trailers'); // це краще зробити це через бібліотеку Notify\n    } else {\n      // якщо після запиту Є масив з відео, то відкривається модалка відео-галереї\n      console.log(videosArr);\n      overlayForVideo.style.width = '100%';\n      document.body.classList.add('no-scroll');\n      // перебираємо всі запропоновіні відео, дістаємо ТІЛЬКИ трейлери, додаємо їх в масив трейлерів embedTrailer\n      videosArr.forEach(video => {\n        let { key, site, name, type } = video;\n        if (site === 'YouTube' && type === 'Trailer') {\n          embedTrailer.push(`\n                    <iframe src=\"https://www.youtube.com/embed/${key}\" \n                    title=\"${name}\" frameborder=\"0\" allow=\"accelerometer; autoplay; \n                    clipboard-write; encrypted-media; gyroscope; picture-in-picture\" allowfullscreen></iframe>\n                    `);\n        }\n      });\n      // джойнимо і виводимо трейлери в галерею\n      overlayContent.innerHTML = embedTrailer.join('');\n    }\n  });\n}\n\n// закриття модалки з трейлерами і очищення контенту відео-галереї при натисканні на кнопку \"Х\"\nfunction closeTrailersGallary() {\n  overlayForVideo.style.width = '0%';\n  document.body.classList.remove('no-scroll');\n  overlayContent.innerHTML = 0;\n}\n\nexport {\n  onSearchTrailer,\n  getTrailerId,\n  openTrailersGallary,\n  showTrailersGallary,\n  closeTrailersGallary,\n};\n\nwindow.addEventListener('keydown', onEscClick)\n\nfunction onEscClick(evt) {\n\n  if (evt.code === 'Escape') {\n    evt.preventDefault();\n    overlayForVideo.style.width = '0%';\n    document.body.classList.remove('no-scroll');    \n    overlayContent.innerHTML = 0;\n  }\n}\n\nconst backdrop = document.querySelector('.overlay__backdrop')\nbackdrop.addEventListener('click', onBackdropClick)\n// console.log(backdrop)\n\n\nfunction onBackdropClick(evt) {\n  if (evt.currentTarget === evt.target) {\n    // console.log('Backdrop')\n    evt.preventDefault();\n    document.body.classList.remove('no-scroll');\n    overlayForVideo.style.width = '0%';\n    overlayContent.innerHTML = 0;\n  }\n}","import FetchFilmsApi from \"../fetch-service/fechFilmsApi\";\nimport { refs } from \"../fetch-service/refs\";\nimport { onCreat, creatCards, genresSerch, checkYear } from '../main/renderMainMarkup';\n\nconst fetchApi = new FetchFilmsApi();\nlet currentPage = 1;\nlet allGenres = {}; \nconst options = { mediaType: 'movie', timeWindow: 'week' }\n\nrefs.paginationListItemPrev.addEventListener('click', onClickBtnPrev);\nrefs.paginationListItemNext.addEventListener('click', onClickBtnNext)\n\nexport function onClickBtnNext() {\n  refs.gallery.innerHTML = \"\";\n  currentPage += 1;\n  fetchApi.actualPage = currentPage;\n  refs.paginationListItemPage.innerHTML = currentPage;\n  fetchApi.fetchWithAllFilmsData(options).then(data => creatCards(data.data.results))\n}\n\nfunction onClickBtnPrev() {\n  if (currentPage === 1) {\n    return\n  }\n  refs.gallery.innerHTML = \"\";\n  currentPage -= 1;\n  fetchApi.actualPage = currentPage;\n  refs.paginationListItemPage.innerHTML = currentPage;\n  fetchApi.fetchWithAllFilmsData(options).then(data => creatCards(data.data.results))\n}\n","export function onButtonScrolUp() {\n  document.addEventListener('DOMContentLoaded', () => {\n    let to_top_btn = document.querySelector('.btn-goup');\n\n    console.log(`btn on`);\n\n    window.onscroll = function () {\n      if (window.pageYOffset > 580) {\n        to_top_btn.classList.remove('is-hidden');\n      } else {\n        to_top_btn.classList.add('is-hidden');\n      }\n    };\n\n    // плавный скролл наверх\n    to_top_btn.addEventListener('click', function () {\n      console.log(`это я`);\n      window.scrollBy({\n        top: -window.pageYOffset,\n        behavior: 'smooth',\n      });\n    });\n  });\n}\n"],"names":["parcelRequire","$1RuQn","$4609dd7e660aa1d8$var$filmsAPIService","$90yji","default","$4609dd7e660aa1d8$var$parameters","mediaType","lang","page","include_adult","refs","form","addEventListener","event","preventDefault","actualQuery","currentTarget","elements","filmname","value","formNotification","textContent","setTimeout","fetchWithSearchFilmData","then","resp","data","results","length","$kvKoM","creatCards","changeColor","document","body","classList","toggle","$bpxeT","window","$4c7290db94832356$var$onEscClick","evt","code","$4c7290db94832356$var$closeModal","modal","remove","removeEventListener","$4c7290db94832356$var$fetchFilmsApi","$4c7290db94832356$var$_openModal","$parcel$interopDefault","$2TvXO","mark","_callee","e","filmId","target","contains","backdrop","add","modalContent","innerHTML","dataset","id","getCurrentFilm","$eLVJN","createMarkup","catch","error","console","log","apply","this","arguments","$4c7290db94832356$var$_closeModal","modalCloseBtn","keyCode","gallery","$4c7290db94832356$var$backdrop","querySelector","$2827c5376f0d5587$var$api","$2827c5376f0d5587$var$currentId","$2827c5376f0d5587$var$videosArr","$2827c5376f0d5587$var$embedTrailer","$2827c5376f0d5587$var$closeBtn","$2827c5376f0d5587$var$overlayForVideo","$2827c5376f0d5587$var$overlayContent","Number","innerText","fetchTrailer","response","style","width","forEach","video","key","site","name","type","push","concat","join","alert","$315b20679e144ef4$var$fetchApi","$315b20679e144ef4$var$currentPage","$315b20679e144ef4$var$options","timeWindow","paginationListItemPrev","actualPage","paginationListItemPage","fetchWithAllFilmsData","paginationListItemNext","to_top_btn","onscroll","pageYOffset","scrollBy","top","behavior","onCreat"],"version":3,"file":"index.4461df2e.js.map"}